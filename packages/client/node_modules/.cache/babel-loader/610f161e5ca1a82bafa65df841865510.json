{"ast":null,"code":"import _classCallCheck from \"/Users/jean/dev/blackout/packages/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jean/dev/blackout/packages/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jean/dev/blackout/packages/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jean/dev/blackout/packages/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jean/dev/blackout/packages/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jean/dev/blackout/packages/client/src/components/mobile/MobileApp.js\";\nimport React, { Component } from 'react';\nimport './MobileApp.scss';\nimport io from 'socket.io-client';\nvar socket = io.connect(\"http://localhost:8888\");\n\nvar MobileApp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MobileApp, _Component);\n\n  function MobileApp(props) {\n    var _this;\n\n    _classCallCheck(this, MobileApp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MobileApp).call(this, props));\n\n    _this.sendDeviceType = function () {\n      console.log('mobile type');\n      socket.emit('deviceType', {\n        type: 'mobile'\n      });\n    };\n\n    _this.getCurrentRoom = function () {\n      socket.on('connectToRoom', function (data) {\n        _this.setState({\n          room: data.room\n        });\n\n        _this.setState({\n          userId: data.userId\n        });\n\n        var now = new Date();\n        var time = now.getTime();\n        time += 3600 * 1000;\n        now.setTime(time);\n        document.cookie = 'room=' + data.room + '; expires=' + now.toUTCString() + '; path=/';\n        document.cookie = 'userId=' + data.userId + '; expires=' + now.toUTCString() + '; path=/';\n      });\n    };\n\n    _this.handleChange = function (e) {\n      var value = e.target.value;\n\n      _this.setState({\n        code: value\n      });\n    };\n\n    _this.disconnected = function () {\n      socket.on('userDisconnected', function (data) {\n        console.log(data);\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var code = _this.state.code;\n\n      if (code !== null && code !== '') {\n        console.log(code);\n        socket.emit('sendCode', {\n          key: code\n        });\n      } else {\n        console.log('le code est vide');\n      }\n    };\n\n    _this.checkUserConnection = function () {\n      socket.on('access', function (data) {\n        console.log(data);\n      });\n    };\n\n    _this.state = {\n      room: 'hello',\n      userId: null,\n      code: 'null'\n    };\n    return _this;\n  }\n\n  _createClass(MobileApp, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.sendDeviceType();\n      this.getCurrentRoom();\n      this.checkUserConnection();\n      this.disconnected();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          room = _this$state.room,\n          userId = _this$state.userId;\n      return React.createElement(\"div\", {\n        className: \"App mobile-app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"App-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Mobile - hello \", userId, \" welcome in \", room), React.createElement(\"form\", {\n        className: \"commentForm\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleChange,\n        value: this.state.code,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return MobileApp;\n}(Component);\n\nexport default MobileApp;","map":{"version":3,"sources":["/Users/jean/dev/blackout/packages/client/src/components/mobile/MobileApp.js"],"names":["React","Component","io","socket","connect","MobileApp","props","sendDeviceType","console","log","emit","type","getCurrentRoom","on","data","setState","room","userId","now","Date","time","getTime","setTime","document","cookie","toUTCString","handleChange","e","value","target","code","disconnected","handleSubmit","preventDefault","state","key","checkUserConnection"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './MobileApp.scss'\nimport io from 'socket.io-client'\nconst socket = io.connect(\"http://localhost:8888\")\n\nclass MobileApp extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n        room: 'hello',\n        userId: null,\n        code: 'null'\n    }\n  }\n\n  componentWillMount() {\n    this.sendDeviceType()\n    this.getCurrentRoom()\n    this.checkUserConnection()\n    this.disconnected()\n  }\n\n  sendDeviceType = () => {\n    console.log('mobile type')  \n    socket.emit('deviceType',{\n        type:'mobile'\n    })\n  }\n\n  getCurrentRoom = () => {\n    socket.on('connectToRoom',(data) => {\n        this.setState({room : data.room})\n        this.setState({userId : data.userId})\n        let now = new Date()\n        let time = now.getTime()\n        time += 3600 * 1000\n        now.setTime(time)\n        document.cookie = \n        'room=' + data.room + \n        '; expires=' + now.toUTCString() + \n        '; path=/'\n      \n        document.cookie = \n        'userId=' + data.userId + \n        '; expires=' + now.toUTCString() + \n        '; path=/'\n     })\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value \n    this.setState({\n      code: value\n    })\n  }\n  \n  disconnected = () => {\n    socket.on('userDisconnected' , (data) => {\n      console.log(data)\n    })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault()\n    let code = this.state.code\n    if(code !== null && code !== '') {\n      console.log(code)\n      socket.emit('sendCode', {\n        key: code\n      })\n    } else {\n      console.log('le code est vide')\n    }\n  }\n\n  checkUserConnection = () => {\n    socket.on('access',(data) => {\n      console.log(data)\n    })\n  }\n\n  render() {\n    const { room, userId } = this.state\n\n    return (\n      <div className=\"App mobile-app\">\n        <header className=\"App-header\">\n          <p>\n            Mobile - hello {userId} welcome in {room}\n          </p>\n          <form className=\"commentForm\" onSubmit={this.handleSubmit}>\n            <input type=\"text\" onChange={this.handleChange}  value={this.state.code} />\n          </form>\n        </header>\n      </div>\n    )\n  }\n}\n\nexport default MobileApp\n\n"]},"metadata":{},"sourceType":"module"}